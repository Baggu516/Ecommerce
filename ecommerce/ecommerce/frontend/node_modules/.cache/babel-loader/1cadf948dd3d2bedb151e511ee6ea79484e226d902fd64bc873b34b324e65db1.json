{"ast":null,"code":"const placeOrder = async (e, product) => {\n  e.preventDefault();\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (!user || !user._id) {\n    alert(\"You must be logged in to place an order.\");\n    return;\n  }\n  const {\n    name,\n    phone,\n    address,\n    date\n  } = formData;\n  if (!name || !phone || !address || !date) {\n    alert(\"Please fill out all fields including date.\");\n    return;\n  }\n  const quantity = parseInt(product.quantity || 1);\n  const total = product.price * quantity;\n  const orderPayload = {\n    userId: user._id,\n    name,\n    phone,\n    address,\n    items: [{\n      productId: product._id,\n      name: product.name,\n      price: product.price,\n      quantity: quantity\n    }],\n    total,\n    createdAt: new Date(date).toISOString()\n  };\n  console.log(\"üì¶ Sending order:\", orderPayload); // Debugging\n\n  try {\n    const response = await axios.post('http://localhost:5000/api/orders', orderPayload);\n    if (response.status === 201) {\n      console.log(\"‚úÖ Order success:\", response.data);\n      setFormData({\n        name: '',\n        phone: '',\n        address: '',\n        date: ''\n      });\n      setExpandedProductId(null);\n      localStorage.removeItem('cart');\n      navigate('/thank-you');\n    } else {\n      console.error(\"‚ùå Unexpected response:\", response);\n      alert('Unexpected error occurred. Try again.');\n    }\n  } catch (err) {\n    var _err$response, _err$response$data;\n    // ‚úÖ This gives exact reason from backend\n    const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message;\n    console.error('‚ùå Order failed:', msg);\n    alert(`Order failed: ${msg}`);\n  }\n};","map":{"version":3,"names":["placeOrder","e","product","preventDefault","user","JSON","parse","localStorage","getItem","_id","alert","name","phone","address","date","formData","quantity","parseInt","total","price","orderPayload","userId","items","productId","createdAt","Date","toISOString","console","log","response","axios","post","status","data","setFormData","setExpandedProductId","removeItem","navigate","error","err","_err$response","_err$response$data","msg","message"],"sources":["C:/Users/meets/Downloads/ecommerce-full-project (2)/ecommerce/ecommerce/frontend/src/pages/Cart.js"],"sourcesContent":["const placeOrder = async (e, product) => {\r\n  e.preventDefault();\r\n\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  if (!user || !user._id) {\r\n    alert(\"You must be logged in to place an order.\");\r\n    return;\r\n  }\r\n\r\n  const { name, phone, address, date } = formData;\r\n  if (!name || !phone || !address || !date) {\r\n    alert(\"Please fill out all fields including date.\");\r\n    return;\r\n  }\r\n\r\n  const quantity = parseInt(product.quantity || 1);\r\n  const total = product.price * quantity;\r\n\r\n  const orderPayload = {\r\n    userId: user._id,\r\n    name,\r\n    phone,\r\n    address,\r\n    items: [\r\n      {\r\n        productId: product._id,\r\n        name: product.name,\r\n        price: product.price,\r\n        quantity: quantity\r\n      }\r\n    ],\r\n    total,\r\n    createdAt: new Date(date).toISOString()\r\n  };\r\n\r\n  console.log(\"üì¶ Sending order:\", orderPayload); // Debugging\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:5000/api/orders', orderPayload);\r\n\r\n    if (response.status === 201) {\r\n      console.log(\"‚úÖ Order success:\", response.data);\r\n      setFormData({ name: '', phone: '', address: '', date: '' });\r\n      setExpandedProductId(null);\r\n      localStorage.removeItem('cart');\r\n      navigate('/thank-you');\r\n    } else {\r\n      console.error(\"‚ùå Unexpected response:\", response);\r\n      alert('Unexpected error occurred. Try again.');\r\n    }\r\n  } catch (err) {\r\n    // ‚úÖ This gives exact reason from backend\r\n    const msg = err.response?.data?.error || err.message;\r\n    console.error('‚ùå Order failed:', msg);\r\n    alert(`Order failed: ${msg}`);\r\n  }\r\n};\r\n"],"mappings":"AAAA,MAAMA,UAAU,GAAG,MAAAA,CAAOC,CAAC,EAAEC,OAAO,KAAK;EACvCD,CAAC,CAACE,cAAc,CAAC,CAAC;EAElB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,IAAI,CAACJ,IAAI,IAAI,CAACA,IAAI,CAACK,GAAG,EAAE;IACtBC,KAAK,CAAC,0CAA0C,CAAC;IACjD;EACF;EAEA,MAAM;IAAEC,IAAI;IAAEC,KAAK;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGC,QAAQ;EAC/C,IAAI,CAACJ,IAAI,IAAI,CAACC,KAAK,IAAI,CAACC,OAAO,IAAI,CAACC,IAAI,EAAE;IACxCJ,KAAK,CAAC,4CAA4C,CAAC;IACnD;EACF;EAEA,MAAMM,QAAQ,GAAGC,QAAQ,CAACf,OAAO,CAACc,QAAQ,IAAI,CAAC,CAAC;EAChD,MAAME,KAAK,GAAGhB,OAAO,CAACiB,KAAK,GAAGH,QAAQ;EAEtC,MAAMI,YAAY,GAAG;IACnBC,MAAM,EAAEjB,IAAI,CAACK,GAAG;IAChBE,IAAI;IACJC,KAAK;IACLC,OAAO;IACPS,KAAK,EAAE,CACL;MACEC,SAAS,EAAErB,OAAO,CAACO,GAAG;MACtBE,IAAI,EAAET,OAAO,CAACS,IAAI;MAClBQ,KAAK,EAAEjB,OAAO,CAACiB,KAAK;MACpBH,QAAQ,EAAEA;IACZ,CAAC,CACF;IACDE,KAAK;IACLM,SAAS,EAAE,IAAIC,IAAI,CAACX,IAAI,CAAC,CAACY,WAAW,CAAC;EACxC,CAAC;EAEDC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAER,YAAY,CAAC,CAAC,CAAC;;EAEhD,IAAI;IACF,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,kCAAkC,EAAEX,YAAY,CAAC;IAEnF,IAAIS,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MAC3BL,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEC,QAAQ,CAACI,IAAI,CAAC;MAC9CC,WAAW,CAAC;QAAEvB,IAAI,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,IAAI,EAAE;MAAG,CAAC,CAAC;MAC3DqB,oBAAoB,CAAC,IAAI,CAAC;MAC1B5B,YAAY,CAAC6B,UAAU,CAAC,MAAM,CAAC;MAC/BC,QAAQ,CAAC,YAAY,CAAC;IACxB,CAAC,MAAM;MACLV,OAAO,CAACW,KAAK,CAAC,wBAAwB,EAAET,QAAQ,CAAC;MACjDnB,KAAK,CAAC,uCAAuC,CAAC;IAChD;EACF,CAAC,CAAC,OAAO6B,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZ;IACA,MAAMC,GAAG,GAAG,EAAAF,aAAA,GAAAD,GAAG,CAACV,QAAQ,cAAAW,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcP,IAAI,cAAAQ,kBAAA,uBAAlBA,kBAAA,CAAoBH,KAAK,KAAIC,GAAG,CAACI,OAAO;IACpDhB,OAAO,CAACW,KAAK,CAAC,iBAAiB,EAAEI,GAAG,CAAC;IACrChC,KAAK,CAAC,iBAAiBgC,GAAG,EAAE,CAAC;EAC/B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}